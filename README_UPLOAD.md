# 图片上传功能说明

## ✅ 是的，可以直接在网站后台上传图片！

### 使用步骤

1. **启动服务器**
   ```bash
   ./start-all.sh
   ```
   或分别启动：
   ```bash
   # 终端1 - 上传服务器
   python3 upload_server.py
   
   # 终端2 - 网站服务器
   python3 -m http.server 8000
   ```

2. **访问后台管理**
   - 打开：http://localhost:8000/admin/login.html
   - 任意输入用户名和密码登录

3. **上传图片**
   - 进入 "Stores" 页面
   - 点击 "Add Store" 或编辑现有商店
   - 在 "Store Logo" 区域：
     - **拖拽图片**到上传区域
     - 或**点击上传区域**选择文件
   - 图片会立即显示预览
   - 点击保存，图片会真实上传到服务器

### 上传功能特点

✅ **拖拽上传** - 直接将图片拖到上传区域  
✅ **点击上传** - 点击选择文件  
✅ **实时预览** - 上传后立即显示  
✅ **真实存储** - 图片保存到 `uploads/` 目录  
✅ **自动命名** - 自动生成唯一文件名  
✅ **文件验证** - 只接受图片格式，限制5MB  

### 上传的图片在哪里？

- **存储位置**：`uploads/` 目录
- **访问地址**：`http://localhost:3000/uploads/文件名`
- **自动保存**：上传后立即保存，无需额外操作

### 如果上传服务器未运行？

如果上传服务器未运行，系统会：
- 自动降级到模拟模式
- 使用占位图片
- **不会报错**，可以正常使用其他功能

### 支持的图片格式

- JPEG / JPG
- PNG
- GIF
- WebP

### 文件大小限制

- 最大：5MB
- 超过限制会显示错误提示

---

## 技术说明

### 上传流程

1. 用户选择/拖拽图片
2. 前端验证文件类型和大小
3. 显示预览
4. 提交表单时调用上传API
5. 图片上传到服务器 `uploads/` 目录
6. 返回图片URL
7. 保存到数据库

### 服务器选项

**Python版本（推荐）**：
- 文件：`upload_server.py`
- 优点：无需安装额外依赖，使用Python内置库
- 启动：`python3 upload_server.py`

**Node.js版本（可选）**：
- 文件：`server.js`
- 需要：`npm install`
- 启动：`npm start`

两个版本功能相同，选择你更熟悉的即可。

---

## 常见问题

### Q: 上传后图片无法显示？

A: 确保上传服务器正在运行（端口3000）

### Q: 可以上传多个图片吗？

A: 目前每个商店只能上传一个Logo。如需多个图片，可以多次编辑。

### Q: 上传的图片会永久保存吗？

A: 是的，图片会保存在 `uploads/` 目录，直到手动删除。

### Q: 生产环境怎么办？

A: 建议使用专业的云存储服务：
- AWS S3
- 阿里云OSS
- 腾讯云COS
- Google Cloud Storage

然后修改 `admin/js/api.js` 中的上传URL即可。

---

## 快速测试

1. 启动服务器：`./start-all.sh`
2. 访问后台：http://localhost:8000/admin/login.html
3. 添加商店，上传一张图片
4. 检查 `uploads/` 目录，应该能看到上传的图片文件
