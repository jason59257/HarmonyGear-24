# Cloudflare 部署检查清单

使用此清单确保所有步骤都已完成。

## 前置准备

- [ ] 注册 Cloudflare 账号
- [ ] 注册 GitHub 账号（如果还没有）
- [ ] 将代码推送到 GitHub 仓库

## 部署前台和后台

- [ ] 在 Cloudflare Pages 创建项目
- [ ] 连接 GitHub 仓库
- [ ] 配置构建设置（输出目录：`.`）
- [ ] 完成首次部署
- [ ] 测试前台页面访问
- [ ] 测试后台页面访问（`/admin/`）

## 配置图片上传

- [ ] 创建 R2 存储桶（名称：`coupon-images`）
- [ ] 创建 R2 API Token
- [ ] 保存 Access Key ID 和 Secret Access Key
- [ ] 安装 Wrangler CLI：`npm install -g wrangler`
- [ ] 登录 Wrangler：`wrangler login`
- [ ] 更新 `wrangler.toml` 中的存储桶名称
- [ ] 部署 Worker：`wrangler deploy`
- [ ] 复制 Worker URL
- [ ] 更新 `admin/js/config.js` 中的 `UPLOAD_WORKER_URL`
- [ ] 启用 R2 存储桶的公共访问
- [ ] 配置 R2 自定义域名（可选）
- [ ] 更新 `admin/js/config.js` 中的 `R2_PUBLIC_URL`
- [ ] 测试图片上传功能

## 域名配置（可选）

- [ ] 添加域名到 Cloudflare
- [ ] 更新域名服务器（Nameservers）
- [ ] 配置 DNS 记录（CNAME 指向 Pages）
- [ ] 在 Pages 中设置自定义域名
- [ ] 等待 SSL 证书自动配置
- [ ] 测试自定义域名访问

## 测试清单

- [ ] 前台首页正常显示
- [ ] 前台商店列表正常显示
- [ ] 前台优惠券列表正常显示
- [ ] 后台登录功能正常
- [ ] 后台 Dashboard 正常显示
- [ ] 后台商店管理（增删改查）
- [ ] 后台优惠券管理（增删改查）
- [ ] 后台图片上传功能
- [ ] 上传的图片可以正常显示
- [ ] 所有页面在移动端正常显示

## 常见问题检查

- [ ] 检查浏览器控制台是否有错误
- [ ] 检查 Network 标签页中的请求状态
- [ ] 确认 Worker URL 正确
- [ ] 确认 R2 存储桶已启用公共访问
- [ ] 确认 CORS 配置正确

## 完成部署后

- [ ] 记录所有重要的 URL 和配置信息
- [ ] 备份配置文件
- [ ] 通知团队成员部署完成

---

## 重要 URL 记录

填写以下信息以便后续维护：

- **前台 URL**: `___________________________`
- **后台 URL**: `___________________________`
- **Worker URL**: `___________________________`
- **R2 存储桶名称**: `___________________________`
- **自定义域名**: `___________________________`
